{"version":3,"file":"advanced-camera.js","sources":["advanced-camera.vue","cGFnZXMvYWR2YW5jZWQtY2FtZXJhL2FkdmFuY2VkLWNhbWVyYS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"advanced-camera-page\">\r\n    <!-- 相机组件 -->\r\n    <camera \r\n      class=\"camera-preview\"\r\n      :device-position=\"devicePosition\"\r\n      :flash=\"flashMode\"\r\n      :frame-size=\"frameSize\"\r\n      @error=\"onCameraError\"\r\n      @initdone=\"onCameraReady\"\r\n      @scancode=\"onScanCode\"\r\n    >\r\n      <!-- Canvas 用于人脸检测绘制 -->\r\n      <canvas \r\n        class=\"face-detection-canvas\"\r\n        canvas-id=\"faceCanvas\"\r\n        :style=\"{ width: canvasWidth + 'px', height: canvasHeight + 'px' }\"\r\n      ></canvas>\r\n\r\n      <!-- 相机表面覆盖层 -->\r\n      <cover-view class=\"camera-overlay\">\r\n        <!-- 实时人脸检测状态 -->\r\n        <cover-view class=\"face-status\" :class=\"{ active: faceDetected }\">\r\n          <cover-view class=\"status-icon\">{{ faceDetected ? '😊' : '🔍' }}</cover-view>\r\n          <cover-view class=\"status-text\">{{ faceStatus }}</cover-view>\r\n        </cover-view>\r\n\r\n        <!-- 智能拍摄引导 -->\r\n        <cover-view class=\"smart-guide\" v-if=\"showGuide\">\r\n          <cover-view class=\"guide-content\">\r\n            <cover-view class=\"guide-step\">{{ currentGuideStep.title }}</cover-view>\r\n            <cover-view class=\"guide-desc\">{{ currentGuideStep.description }}</cover-view>\r\n            <cover-view class=\"guide-progress\">\r\n              <cover-view \r\n                class=\"progress-dot\" \r\n                v-for=\"(step, index) in guideSteps\" \r\n                :key=\"index\"\r\n                :class=\"{ active: index <= currentGuideIndex }\"\r\n              ></cover-view>\r\n            </cover-view>\r\n          </cover-view>\r\n        </cover-view>\r\n\r\n        <!-- 人像轮廓实时调整框 -->\r\n        <cover-view class=\"dynamic-frame\" :style=\"frameStyle\">\r\n          <cover-view class=\"frame-corners\">\r\n            <cover-view class=\"corner top-left\"></cover-view>\r\n            <cover-view class=\"corner top-right\"></cover-view>\r\n            <cover-view class=\"corner bottom-left\"></cover-view>\r\n            <cover-view class=\"corner bottom-right\"></cover-view>\r\n          </cover-view>\r\n          \r\n          <!-- 人脸识别指示器 -->\r\n          <cover-view class=\"face-indicators\" v-if=\"faceRect\">\r\n            <cover-view \r\n              class=\"face-marker\"\r\n              :style=\"{ \r\n                left: faceRect.x + 'px', \r\n                top: faceRect.y + 'px',\r\n                width: faceRect.width + 'px',\r\n                height: faceRect.height + 'px'\r\n              }\"\r\n            ></cover-view>\r\n          </cover-view>\r\n        </cover-view>\r\n\r\n        <!-- 智能拍摄控制 -->\r\n        <cover-view class=\"smart-controls\">\r\n          <!-- 自动拍摄模式 -->\r\n          <cover-view class=\"auto-capture\" v-if=\"autoMode\">\r\n            <cover-view class=\"countdown\" v-if=\"countdown > 0\">{{ countdown }}</cover-view>\r\n            <cover-view class=\"auto-status\">{{ autoStatus }}</cover-view>\r\n          </cover-view>\r\n\r\n          <!-- 拍摄质量指示器 -->\r\n          <cover-view class=\"quality-indicator\">\r\n            <cover-view class=\"quality-item\" :class=\"{ good: lightingGood }\">\r\n              <cover-view class=\"indicator-icon\">💡</cover-view>\r\n              <cover-view class=\"indicator-text\">光线</cover-view>\r\n            </cover-view>\r\n            <cover-view class=\"quality-item\" :class=\"{ good: stabilityGood }\">\r\n              <cover-view class=\"indicator-icon\">📱</cover-view>\r\n              <cover-view class=\"indicator-text\">稳定</cover-view>\r\n            </cover-view>\r\n            <cover-view class=\"quality-item\" :class=\"{ good: positionGood }\">\r\n              <cover-view class=\"indicator-icon\">👤</cover-view>\r\n              <cover-view class=\"indicator-text\">位置</cover-view>\r\n            </cover-view>\r\n          </cover-view>\r\n        </cover-view>\r\n\r\n        <!-- 增强功能按钮组 -->\r\n        <cover-view class=\"enhanced-controls\">\r\n          <cover-view class=\"control-group left\">\r\n            <cover-view class=\"control-btn\" @tap=\"toggleAutoMode\">\r\n              <cover-image \r\n                :src=\"autoMode ? '/static/icons/auto-on.svg' : '/static/icons/auto-off.svg'\" \r\n                class=\"btn-icon\"\r\n              ></cover-image>\r\n              <cover-view class=\"btn-label\">{{ autoMode ? '自动' : '手动' }}</cover-view>\r\n            </cover-view>\r\n            \r\n            <cover-view class=\"control-btn\" @tap=\"toggleGrid\">\r\n              <cover-image \r\n                :src=\"showGrid ? '/static/icons/grid-on.svg' : '/static/icons/grid-off.svg'\" \r\n                class=\"btn-icon\"\r\n              ></cover-image>\r\n              <cover-view class=\"btn-label\">网格</cover-view>\r\n            </cover-view>\r\n          </cover-view>\r\n\r\n          <cover-view class=\"control-group right\">\r\n            <cover-view class=\"control-btn\" @tap=\"toggleBeauty\">\r\n              <cover-image \r\n                :src=\"beautyMode ? '/static/icons/beauty-on.svg' : '/static/icons/beauty-off.svg'\" \r\n                class=\"btn-icon\"\r\n              ></cover-image>\r\n              <cover-view class=\"btn-label\">美颜</cover-view>\r\n            </cover-view>\r\n            \r\n            <cover-view class=\"control-btn\" @tap=\"adjustBrightness\">\r\n              <cover-image src=\"/static/icons/brightness.svg\" class=\"btn-icon\"></cover-image>\r\n              <cover-view class=\"btn-label\">亮度</cover-view>\r\n            </cover-view>\r\n          </cover-view>\r\n        </cover-view>\r\n\r\n        <!-- 网格线 -->\r\n        <cover-view class=\"grid-overlay\" v-if=\"showGrid\">\r\n          <cover-view class=\"grid-line horizontal\" style=\"top: 33.33%\"></cover-view>\r\n          <cover-view class=\"grid-line horizontal\" style=\"top: 66.67%\"></cover-view>\r\n          <cover-view class=\"grid-line vertical\" style=\"left: 33.33%\"></cover-view>\r\n          <cover-view class=\"grid-line vertical\" style=\"left: 66.67%\"></cover-view>\r\n        </cover-view>\r\n\r\n        <!-- 底部增强控制栏 -->\r\n        <cover-view class=\"bottom-enhanced-controls\">\r\n          <cover-view class=\"photo-modes\">\r\n            <cover-view \r\n              class=\"mode-btn\" \r\n              v-for=\"mode in photoModes\" \r\n              :key=\"mode.id\"\r\n              :class=\"{ active: currentMode === mode.id }\"\r\n              @tap=\"switchMode(mode.id)\"\r\n            >\r\n              {{ mode.name }}\r\n            </cover-view>\r\n          </cover-view>\r\n\r\n          <cover-view class=\"capture-section\">\r\n            <cover-view class=\"timer-btn\" @tap=\"toggleTimer\">\r\n              <cover-view class=\"timer-icon\">⏱️</cover-view>\r\n              <cover-view class=\"timer-text\">{{ timerSeconds }}s</cover-view>\r\n            </cover-view>\r\n\r\n            <cover-view class=\"main-capture-btn\" @tap=\"smartCapture\">\r\n              <cover-view class=\"capture-ring\" :class=\"{ recording: isCapturing }\"></cover-view>\r\n              <cover-view class=\"capture-dot\"></cover-view>\r\n            </cover-view>\r\n\r\n            <cover-view class=\"burst-btn\" @tap=\"toggleBurstMode\">\r\n              <cover-view class=\"burst-icon\">📸</cover-view>\r\n              <cover-view class=\"burst-text\">连拍</cover-view>\r\n            </cover-view>\r\n          </cover-view>\r\n        </cover-view>\r\n      </cover-view>\r\n    </camera>\r\n\r\n    <!-- AI 分析结果展示 -->\r\n    <view class=\"ai-analysis\" v-if=\"showAnalysis\">\r\n      <view class=\"analysis-content\">\r\n        <view class=\"analysis-title\">AI 分析结果</view>\r\n        <view class=\"analysis-items\">\r\n          <view class=\"analysis-item\" v-for=\"item in analysisResult\" :key=\"item.key\">\r\n            <view class=\"item-label\">{{ item.label }}</view>\r\n            <view class=\"item-score\" :class=\"item.status\">{{ item.score }}</view>\r\n          </view>\r\n        </view>\r\n        <view class=\"analysis-actions\">\r\n          <button @tap=\"hideAnalysis\" class=\"btn secondary\">继续拍摄</button>\r\n          <button @tap=\"processPhoto\" class=\"btn primary\">确认使用</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'AdvancedCamera',\r\n  data() {\r\n    return {\r\n      // 基础相机设置\r\n      devicePosition: 'back',\r\n      flashMode: 'off',\r\n      frameSize: 'large',\r\n      \r\n      // 人脸检测相关\r\n      faceDetected: false,\r\n      faceRect: null,\r\n      faceStatus: '请将面部置于框内',\r\n      \r\n      // 智能引导\r\n      showGuide: true,\r\n      currentGuideIndex: 0,\r\n      guideSteps: [\r\n        { title: '调整距离', description: '请保持50-80cm的拍摄距离' },\r\n        { title: '调整角度', description: '保持设备水平，面部居中' },\r\n        { title: '检查光线', description: '确保光线充足均匀' },\r\n        { title: '准备拍摄', description: '保持表情自然，准备拍摄' }\r\n      ],\r\n      \r\n      // 拍摄质量检测\r\n      lightingGood: false,\r\n      stabilityGood: false,\r\n      positionGood: false,\r\n      \r\n      // 增强功能\r\n      autoMode: true,\r\n      showGrid: false,\r\n      beautyMode: false,\r\n      countdown: 0,\r\n      autoStatus: '智能检测中...',\r\n      \r\n      // 拍摄模式\r\n      currentMode: 'photo',\r\n      photoModes: [\r\n        { id: 'photo', name: '拍照' },\r\n        { id: 'burst', name: '连拍' },\r\n        { id: 'timer', name: '定时' }\r\n      ],\r\n      \r\n      // 定时器\r\n      timerSeconds: 3,\r\n      isCapturing: false,\r\n      \r\n      // Canvas 相关\r\n      canvasWidth: 0,\r\n      canvasHeight: 0,\r\n      canvasContext: null,\r\n      \r\n      // AI 分析\r\n      showAnalysis: false,\r\n      analysisResult: [],\r\n      \r\n      // 文档信息\r\n      documentInfo: {\r\n        name: '身份证',\r\n        specs: {\r\n          requirements: '免冠，照片可看见两耳轮廓和相当于男士喉结处的地方'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    currentGuideStep() {\r\n      return this.guideSteps[this.currentGuideIndex] || this.guideSteps[0]\r\n    },\r\n    \r\n    frameStyle() {\r\n      // 动态调整框的样式\r\n      const baseStyle = {\r\n        width: '400rpx',\r\n        height: '520rpx',\r\n        left: '50%',\r\n        top: '50%',\r\n        transform: 'translate(-50%, -50%)'\r\n      }\r\n      \r\n      if (this.faceDetected) {\r\n        baseStyle.borderColor = '#4CAF50'\r\n        baseStyle.boxShadow = '0 0 20rpx rgba(76, 175, 80, 0.5)'\r\n      }\r\n      \r\n      return baseStyle\r\n    }\r\n  },\r\n  \r\n  onLoad(options) {\r\n    // 获取传递的文档信息\r\n    if (options.data) {\r\n      try {\r\n        this.documentInfo = JSON.parse(decodeURIComponent(options.data))\r\n      } catch (e) {\r\n        console.error('解析文档数据失败:', e)\r\n      }\r\n    }\r\n    \r\n    this.initCanvas()\r\n    this.startQualityDetection()\r\n  },\r\n  \r\n  onUnload() {\r\n    this.stopQualityDetection()\r\n  },\r\n  \r\n  methods: {\r\n    // 初始化 Canvas\r\n    initCanvas() {\r\n      const query = uni.createSelectorQuery()\r\n      query.select('.camera-preview').boundingClientRect((rect) => {\r\n        this.canvasWidth = rect.width\r\n        this.canvasHeight = rect.height\r\n        this.canvasContext = uni.createCanvasContext('faceCanvas', this)\r\n      }).exec()\r\n    },\r\n    \r\n    // 开始质量检测\r\n    startQualityDetection() {\r\n      this.qualityTimer = setInterval(() => {\r\n        this.detectQuality()\r\n        this.updateGuide()\r\n      }, 1000)\r\n    },\r\n    \r\n    // 停止质量检测\r\n    stopQualityDetection() {\r\n      if (this.qualityTimer) {\r\n        clearInterval(this.qualityTimer)\r\n      }\r\n    },\r\n    \r\n    // 检测拍摄质量\r\n    detectQuality() {\r\n      // 模拟质量检测逻辑\r\n      this.lightingGood = Math.random() > 0.3\r\n      this.stabilityGood = Math.random() > 0.2\r\n      this.positionGood = this.faceDetected\r\n      \r\n      // 模拟人脸检测\r\n      if (Math.random() > 0.4) {\r\n        this.faceDetected = true\r\n        this.faceRect = {\r\n          x: this.canvasWidth * 0.3,\r\n          y: this.canvasHeight * 0.25,\r\n          width: this.canvasWidth * 0.4,\r\n          height: this.canvasHeight * 0.5\r\n        }\r\n        this.faceStatus = '检测到人脸，位置良好'\r\n      } else {\r\n        this.faceDetected = false\r\n        this.faceRect = null\r\n        this.faceStatus = '请将面部置于框内'\r\n      }\r\n      \r\n      // 自动拍摄逻辑\r\n      if (this.autoMode && this.lightingGood && this.stabilityGood && this.positionGood) {\r\n        this.autoCapture()\r\n      }\r\n    },\r\n    \r\n    // 更新引导步骤\r\n    updateGuide() {\r\n      if (!this.showGuide) return\r\n      \r\n      if (this.lightingGood && this.currentGuideIndex < 1) {\r\n        this.currentGuideIndex = 1\r\n      }\r\n      if (this.stabilityGood && this.currentGuideIndex < 2) {\r\n        this.currentGuideIndex = 2\r\n      }\r\n      if (this.positionGood && this.currentGuideIndex < 3) {\r\n        this.currentGuideIndex = 3\r\n        // 3秒后隐藏引导\r\n        setTimeout(() => {\r\n          this.showGuide = false\r\n        }, 3000)\r\n      }\r\n    },\r\n    \r\n    // 自动拍摄\r\n    autoCapture() {\r\n      if (this.isCapturing) return\r\n      \r\n      this.autoStatus = '条件满足，准备拍摄'\r\n      this.countdown = 3\r\n      \r\n      const countdownTimer = setInterval(() => {\r\n        this.countdown--\r\n        if (this.countdown <= 0) {\r\n          clearInterval(countdownTimer)\r\n          this.executeCapture()\r\n        }\r\n      }, 1000)\r\n    },\r\n    \r\n    // 智能拍摄\r\n    smartCapture() {\r\n      if (this.currentMode === 'timer') {\r\n        this.timerCapture()\r\n      } else if (this.currentMode === 'burst') {\r\n        this.burstCapture()\r\n      } else {\r\n        this.executeCapture()\r\n      }\r\n    },\r\n    \r\n    // 执行拍摄\r\n    executeCapture() {\r\n      this.isCapturing = true\r\n      const ctx = uni.createCameraContext()\r\n      \r\n      ctx.takePhoto({\r\n        quality: 'high',\r\n        success: (res) => {\r\n          console.log('拍摄成功:', res.tempImagePath)\r\n          \r\n          // 触觉反馈\r\n          uni.vibrateShort()\r\n          \r\n          // AI 分析\r\n          this.analyzePhoto(res.tempImagePath)\r\n          \r\n          this.isCapturing = false\r\n        },\r\n        fail: (err) => {\r\n          console.error('拍摄失败:', err)\r\n          uni.showToast({\r\n            title: '拍摄失败',\r\n            icon: 'none'\r\n          })\r\n          this.isCapturing = false\r\n        }\r\n      })\r\n    },\r\n    \r\n    // 定时拍摄\r\n    timerCapture() {\r\n      this.countdown = this.timerSeconds\r\n      const timer = setInterval(() => {\r\n        this.countdown--\r\n        if (this.countdown <= 0) {\r\n          clearInterval(timer)\r\n          this.executeCapture()\r\n        }\r\n      }, 1000)\r\n    },\r\n    \r\n    // 连拍模式\r\n    burstCapture() {\r\n      let count = 0\r\n      const maxCount = 5\r\n      const interval = 500\r\n      \r\n      const burstTimer = setInterval(() => {\r\n        if (count >= maxCount) {\r\n          clearInterval(burstTimer)\r\n          return\r\n        }\r\n        \r\n        this.executeCapture()\r\n        count++\r\n      }, interval)\r\n    },\r\n    \r\n    // AI 分析照片\r\n    analyzePhoto(imagePath) {\r\n      // 模拟 AI 分析\r\n      setTimeout(() => {\r\n        this.analysisResult = [\r\n          { key: 'face', label: '人脸检测', score: '95分', status: 'good' },\r\n          { key: 'lighting', label: '光线质量', score: '88分', status: 'good' },\r\n          { key: 'clarity', label: '清晰度', score: '92分', status: 'good' },\r\n          { key: 'position', label: '位置居中', score: '85分', status: 'warning' },\r\n          { key: 'background', label: '背景纯净', score: '90分', status: 'good' }\r\n        ]\r\n        this.showAnalysis = true\r\n      }, 1000)\r\n    },\r\n    \r\n    // 切换拍摄模式\r\n    switchMode(mode) {\r\n      this.currentMode = mode\r\n    },\r\n    \r\n    // 切换自动模式\r\n    toggleAutoMode() {\r\n      this.autoMode = !this.autoMode\r\n      this.autoStatus = this.autoMode ? '智能检测中...' : '手动拍摄模式'\r\n    },\r\n    \r\n    // 切换网格线\r\n    toggleGrid() {\r\n      this.showGrid = !this.showGrid\r\n    },\r\n    \r\n    // 切换美颜\r\n    toggleBeauty() {\r\n      this.beautyMode = !this.beautyMode\r\n    },\r\n    \r\n    // 调整亮度\r\n    adjustBrightness() {\r\n      // 这里可以实现亮度调整功能\r\n      uni.showToast({\r\n        title: '亮度调整功能',\r\n        icon: 'none'\r\n      })\r\n    },\r\n    \r\n    // 切换定时器\r\n    toggleTimer() {\r\n      const times = [3, 5, 10]\r\n      const currentIndex = times.indexOf(this.timerSeconds)\r\n      this.timerSeconds = times[(currentIndex + 1) % times.length]\r\n    },\r\n    \r\n    // 切换连拍模式\r\n    toggleBurstMode() {\r\n      this.currentMode = this.currentMode === 'burst' ? 'photo' : 'burst'\r\n    },\r\n    \r\n    // 隐藏分析结果\r\n    hideAnalysis() {\r\n      this.showAnalysis = false\r\n    },\r\n    \r\n    // 处理照片\r\n    processPhoto() {\r\n      // 返回上一页并传递结果\r\n      const pages = getCurrentPages()\r\n      const prevPage = pages[pages.length - 2]\r\n      if (prevPage) {\r\n        prevPage.$vm.handlePhotoResult('processed_image_path')\r\n      }\r\n      uni.navigateBack()\r\n    },\r\n    \r\n    // 相机事件处理\r\n    onCameraError(e) {\r\n      console.error('相机错误:', e)\r\n    },\r\n    \r\n    onCameraReady() {\r\n      console.log('相机准备就绪')\r\n    },\r\n    \r\n    onScanCode(e) {\r\n      console.log('扫描到二维码:', e)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-camera-page {\r\n  position: relative;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background-color: #000;\r\n}\r\n\r\n.camera-preview {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.face-detection-canvas {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 5;\r\n  pointer-events: none;\r\n}\r\n\r\n.camera-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 10;\r\n}\r\n\r\n/* 人脸检测状态 */\r\n.face-status {\r\n  position: absolute;\r\n  top: 100rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: rgba(0, 0, 0, 0.7);\r\n  border-radius: 50rpx;\r\n  padding: 20rpx 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.face-status.active {\r\n  background-color: rgba(76, 175, 80, 0.8);\r\n}\r\n\r\n.status-icon {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.status-text {\r\n  color: white;\r\n  font-size: 28rpx;\r\n}\r\n\r\n/* 智能引导 */\r\n.smart-guide {\r\n  position: absolute;\r\n  top: 200rpx;\r\n  left: 32rpx;\r\n  right: 32rpx;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  border-radius: 24rpx;\r\n  padding: 32rpx;\r\n}\r\n\r\n.guide-content {\r\n  text-align: center;\r\n  color: white;\r\n}\r\n\r\n.guide-step {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.guide-desc {\r\n  font-size: 26rpx;\r\n  opacity: 0.8;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.guide-progress {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.progress-dot {\r\n  width: 16rpx;\r\n  height: 16rpx;\r\n  border-radius: 50%;\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.progress-dot.active {\r\n  background-color: #4CAF50;\r\n  transform: scale(1.2);\r\n}\r\n\r\n/* 动态框架 */\r\n.dynamic-frame {\r\n  position: absolute;\r\n  border: 4rpx solid rgba(255, 255, 255, 0.8);\r\n  border-radius: 24rpx;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.frame-corners {\r\n  position: absolute;\r\n  top: -8rpx;\r\n  left: -8rpx;\r\n  right: -8rpx;\r\n  bottom: -8rpx;\r\n}\r\n\r\n.corner {\r\n  position: absolute;\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  border: 4rpx solid #4CAF50;\r\n}\r\n\r\n.corner.top-left {\r\n  top: 0;\r\n  left: 0;\r\n  border-right: none;\r\n  border-bottom: none;\r\n  border-radius: 8rpx 0 0 0;\r\n}\r\n\r\n.corner.top-right {\r\n  top: 0;\r\n  right: 0;\r\n  border-left: none;\r\n  border-bottom: none;\r\n  border-radius: 0 8rpx 0 0;\r\n}\r\n\r\n.corner.bottom-left {\r\n  bottom: 0;\r\n  left: 0;\r\n  border-right: none;\r\n  border-top: none;\r\n  border-radius: 0 0 0 8rpx;\r\n}\r\n\r\n.corner.bottom-right {\r\n  bottom: 0;\r\n  right: 0;\r\n  border-left: none;\r\n  border-top: none;\r\n  border-radius: 0 0 8rpx 0;\r\n}\r\n\r\n.face-marker {\r\n  position: absolute;\r\n  border: 2rpx solid #4CAF50;\r\n  border-radius: 8rpx;\r\n  background-color: rgba(76, 175, 80, 0.1);\r\n}\r\n\r\n/* 智能控制 */\r\n.smart-controls {\r\n  position: absolute;\r\n  top: 350rpx;\r\n  left: 32rpx;\r\n  right: 32rpx;\r\n}\r\n\r\n.auto-capture {\r\n  text-align: center;\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.countdown {\r\n  font-size: 80rpx;\r\n  color: #4CAF50;\r\n  font-weight: 700;\r\n  text-shadow: 0 4rpx 16rpx rgba(76, 175, 80, 0.5);\r\n}\r\n\r\n.auto-status {\r\n  color: white;\r\n  font-size: 28rpx;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.quality-indicator {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 32rpx;\r\n}\r\n\r\n.quality-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  opacity: 0.5;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.quality-item.good {\r\n  opacity: 1;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.indicator-icon {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.indicator-text {\r\n  color: white;\r\n  font-size: 24rpx;\r\n}\r\n\r\n/* 增强控制 */\r\n.enhanced-controls {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 32rpx;\r\n  right: 32rpx;\r\n  transform: translateY(-50%);\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.control-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 32rpx;\r\n}\r\n\r\n.control-btn {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  border-radius: 20rpx;\r\n  padding: 20rpx;\r\n  min-width: 80rpx;\r\n}\r\n\r\n.btn-icon {\r\n  width: 48rpx;\r\n  height: 48rpx;\r\n}\r\n\r\n.btn-label {\r\n  color: white;\r\n  font-size: 22rpx;\r\n}\r\n\r\n/* 网格线 */\r\n.grid-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.grid-line {\r\n  position: absolute;\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.grid-line.horizontal {\r\n  left: 0;\r\n  right: 0;\r\n  height: 1rpx;\r\n}\r\n\r\n.grid-line.vertical {\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 1rpx;\r\n}\r\n\r\n/* 底部增强控制 */\r\n.bottom-enhanced-controls {\r\n  position: absolute;\r\n  bottom: 60rpx;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 0 32rpx;\r\n}\r\n\r\n.photo-modes {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 40rpx;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.mode-btn {\r\n  color: rgba(255, 255, 255, 0.6);\r\n  font-size: 28rpx;\r\n  padding: 16rpx 24rpx;\r\n  border-radius: 20rpx;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.mode-btn.active {\r\n  color: white;\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.capture-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.timer-btn, .burst-btn {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n}\r\n\r\n.timer-icon, .burst-icon {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.timer-text, .burst-text {\r\n  color: white;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.main-capture-btn {\r\n  position: relative;\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.capture-ring {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 4rpx solid white;\r\n  border-radius: 50%;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.capture-ring.recording {\r\n  border-color: #ff4444;\r\n  animation: pulse 1s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0%, 100% { transform: scale(1); }\r\n  50% { transform: scale(1.1); }\r\n}\r\n\r\n.capture-dot {\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  background-color: white;\r\n  border-radius: 50%;\r\n}\r\n\r\n/* AI 分析结果 */\r\n.ai-analysis {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.9);\r\n  z-index: 20;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.analysis-content {\r\n  background-color: white;\r\n  border-radius: 32rpx;\r\n  padding: 60rpx 40rpx;\r\n  margin: 40rpx;\r\n  max-width: 600rpx;\r\n}\r\n\r\n.analysis-title {\r\n  text-align: center;\r\n  font-size: 36rpx;\r\n  font-weight: 600;\r\n  margin-bottom: 40rpx;\r\n  color: #333;\r\n}\r\n\r\n.analysis-items {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.analysis-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24rpx 0;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.analysis-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.item-label {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n\r\n.item-score {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.item-score.good {\r\n  color: #4CAF50;\r\n}\r\n\r\n.item-score.warning {\r\n  color: #FF9800;\r\n}\r\n\r\n.item-score.error {\r\n  color: #f44336;\r\n}\r\n\r\n.analysis-actions {\r\n  display: flex;\r\n  gap: 24rpx;\r\n}\r\n\r\n.btn {\r\n  flex: 1;\r\n  height: 88rpx;\r\n  border-radius: 44rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 32rpx;\r\n  border: none;\r\n}\r\n\r\n.btn.secondary {\r\n  background-color: #f5f5f5;\r\n  color: #333;\r\n}\r\n\r\n.btn.primary {\r\n  background-color: #6C5CE7;\r\n  color: white;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/ClientWorkArea/证照小程序/miniapp/zfb-uniapp/pages/advanced-camera/advanced-camera.vue'\nmy.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AA6LA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AACL,WAAO;AAAA;AAAA,MAEL,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,WAAW;AAAA;AAAA,MAGX,cAAc;AAAA,MACd,UAAU;AAAA,MACV,YAAY;AAAA;AAAA,MAGZ,WAAW;AAAA,MACX,mBAAmB;AAAA,MACnB,YAAY;AAAA,QACV,EAAE,OAAO,QAAQ,aAAa,kBAAmB;AAAA,QACjD,EAAE,OAAO,QAAQ,aAAa,cAAe;AAAA,QAC7C,EAAE,OAAO,QAAQ,aAAa,WAAY;AAAA,QAC1C,EAAE,OAAO,QAAQ,aAAa,cAAc;AAAA,MAC7C;AAAA;AAAA,MAGD,cAAc;AAAA,MACd,eAAe;AAAA,MACf,cAAc;AAAA;AAAA,MAGd,UAAU;AAAA,MACV,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,YAAY;AAAA;AAAA,MAGZ,aAAa;AAAA,MACb,YAAY;AAAA,QACV,EAAE,IAAI,SAAS,MAAM,KAAM;AAAA,QAC3B,EAAE,IAAI,SAAS,MAAM,KAAM;AAAA,QAC3B,EAAE,IAAI,SAAS,MAAM,KAAK;AAAA,MAC3B;AAAA;AAAA,MAGD,cAAc;AAAA,MACd,aAAa;AAAA;AAAA,MAGb,aAAa;AAAA,MACb,cAAc;AAAA,MACd,eAAe;AAAA;AAAA,MAGf,cAAc;AAAA,MACd,gBAAgB,CAAE;AAAA;AAAA,MAGlB,cAAc;AAAA,QACZ,MAAM;AAAA,QACN,OAAO;AAAA,UACL,cAAc;AAAA,QAChB;AAAA,MACF;AAAA,IACF;AAAA,EACD;AAAA,EAED,UAAU;AAAA,IACR,mBAAmB;AACjB,aAAO,KAAK,WAAW,KAAK,iBAAiB,KAAK,KAAK,WAAW,CAAC;AAAA,IACpE;AAAA,IAED,aAAa;AAEX,YAAM,YAAY;AAAA,QAChB,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,KAAK;AAAA,QACL,WAAW;AAAA,MACb;AAEA,UAAI,KAAK,cAAc;AACrB,kBAAU,cAAc;AACxB,kBAAU,YAAY;AAAA,MACxB;AAEA,aAAO;AAAA,IACT;AAAA,EACD;AAAA,EAED,OAAO,SAAS;AAEd,QAAI,QAAQ,MAAM;AAChB,UAAI;AACF,aAAK,eAAe,KAAK,MAAM,mBAAmB,QAAQ,IAAI,CAAC;AAAA,MACjE,SAAS,GAAG;AACVA,sBAAAA,MAAc,MAAA,SAAA,oDAAA,aAAa,CAAC;AAAA,MAC9B;AAAA,IACF;AAEA,SAAK,WAAW;AAChB,SAAK,sBAAsB;AAAA,EAC5B;AAAA,EAED,WAAW;AACT,SAAK,qBAAqB;AAAA,EAC3B;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,aAAa;AACX,YAAM,QAAQA,cAAG,MAAC,oBAAoB;AACtC,YAAM,OAAO,iBAAiB,EAAE,mBAAmB,CAAC,SAAS;AAC3D,aAAK,cAAc,KAAK;AACxB,aAAK,eAAe,KAAK;AACzB,aAAK,gBAAgBA,cAAAA,MAAI,oBAAoB,cAAc,IAAI;AAAA,MAChE,CAAA,EAAE,KAAK;AAAA,IACT;AAAA;AAAA,IAGD,wBAAwB;AACtB,WAAK,eAAe,YAAY,MAAM;AACpC,aAAK,cAAc;AACnB,aAAK,YAAY;AAAA,MAClB,GAAE,GAAI;AAAA,IACR;AAAA;AAAA,IAGD,uBAAuB;AACrB,UAAI,KAAK,cAAc;AACrB,sBAAc,KAAK,YAAY;AAAA,MACjC;AAAA,IACD;AAAA;AAAA,IAGD,gBAAgB;AAEd,WAAK,eAAe,KAAK,OAAS,IAAE;AACpC,WAAK,gBAAgB,KAAK,OAAS,IAAE;AACrC,WAAK,eAAe,KAAK;AAGzB,UAAI,KAAK,OAAO,IAAI,KAAK;AACvB,aAAK,eAAe;AACpB,aAAK,WAAW;AAAA,UACd,GAAG,KAAK,cAAc;AAAA,UACtB,GAAG,KAAK,eAAe;AAAA,UACvB,OAAO,KAAK,cAAc;AAAA,UAC1B,QAAQ,KAAK,eAAe;AAAA,QAC9B;AACA,aAAK,aAAa;AAAA,aACb;AACL,aAAK,eAAe;AACpB,aAAK,WAAW;AAChB,aAAK,aAAa;AAAA,MACpB;AAGA,UAAI,KAAK,YAAY,KAAK,gBAAgB,KAAK,iBAAiB,KAAK,cAAc;AACjF,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACZ,UAAI,CAAC,KAAK;AAAW;AAErB,UAAI,KAAK,gBAAgB,KAAK,oBAAoB,GAAG;AACnD,aAAK,oBAAoB;AAAA,MAC3B;AACA,UAAI,KAAK,iBAAiB,KAAK,oBAAoB,GAAG;AACpD,aAAK,oBAAoB;AAAA,MAC3B;AACA,UAAI,KAAK,gBAAgB,KAAK,oBAAoB,GAAG;AACnD,aAAK,oBAAoB;AAEzB,mBAAW,MAAM;AACf,eAAK,YAAY;AAAA,QAClB,GAAE,GAAI;AAAA,MACT;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACZ,UAAI,KAAK;AAAa;AAEtB,WAAK,aAAa;AAClB,WAAK,YAAY;AAEjB,YAAM,iBAAiB,YAAY,MAAM;AACvC,aAAK;AACL,YAAI,KAAK,aAAa,GAAG;AACvB,wBAAc,cAAc;AAC5B,eAAK,eAAe;AAAA,QACtB;AAAA,MACD,GAAE,GAAI;AAAA,IACR;AAAA;AAAA,IAGD,eAAe;AACb,UAAI,KAAK,gBAAgB,SAAS;AAChC,aAAK,aAAa;AAAA,MACpB,WAAW,KAAK,gBAAgB,SAAS;AACvC,aAAK,aAAa;AAAA,aACb;AACL,aAAK,eAAe;AAAA,MACtB;AAAA,IACD;AAAA;AAAA,IAGD,iBAAiB;AACf,WAAK,cAAc;AACnB,YAAM,MAAMA,cAAG,MAAC,oBAAoB;AAEpC,UAAI,UAAU;AAAA,QACZ,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChBA,wBAAA,MAAA,MAAA,OAAA,oDAAY,SAAS,IAAI,aAAa;AAGtCA,wBAAAA,MAAI,aAAa;AAGjB,eAAK,aAAa,IAAI,aAAa;AAEnC,eAAK,cAAc;AAAA,QACpB;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,MAAc,MAAA,SAAA,oDAAA,SAAS,GAAG;AAC1BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,WACP;AACD,eAAK,cAAc;AAAA,QACrB;AAAA,OACD;AAAA,IACF;AAAA;AAAA,IAGD,eAAe;AACb,WAAK,YAAY,KAAK;AACtB,YAAM,QAAQ,YAAY,MAAM;AAC9B,aAAK;AACL,YAAI,KAAK,aAAa,GAAG;AACvB,wBAAc,KAAK;AACnB,eAAK,eAAe;AAAA,QACtB;AAAA,MACD,GAAE,GAAI;AAAA,IACR;AAAA;AAAA,IAGD,eAAe;AACb,UAAI,QAAQ;AACZ,YAAM,WAAW;AACjB,YAAM,WAAW;AAEjB,YAAM,aAAa,YAAY,MAAM;AACnC,YAAI,SAAS,UAAU;AACrB,wBAAc,UAAU;AACxB;AAAA,QACF;AAEA,aAAK,eAAe;AACpB;AAAA,MACD,GAAE,QAAQ;AAAA,IACZ;AAAA;AAAA,IAGD,aAAa,WAAW;AAEtB,iBAAW,MAAM;AACf,aAAK,iBAAiB;AAAA,UACpB,EAAE,KAAK,QAAQ,OAAO,QAAQ,OAAO,OAAO,QAAQ,OAAQ;AAAA,UAC5D,EAAE,KAAK,YAAY,OAAO,QAAQ,OAAO,OAAO,QAAQ,OAAQ;AAAA,UAChE,EAAE,KAAK,WAAW,OAAO,OAAO,OAAO,OAAO,QAAQ,OAAQ;AAAA,UAC9D,EAAE,KAAK,YAAY,OAAO,QAAQ,OAAO,OAAO,QAAQ,UAAW;AAAA,UACnE,EAAE,KAAK,cAAc,OAAO,QAAQ,OAAO,OAAO,QAAQ,OAAO;AAAA,QACnE;AACA,aAAK,eAAe;AAAA,MACrB,GAAE,GAAI;AAAA,IACR;AAAA;AAAA,IAGD,WAAW,MAAM;AACf,WAAK,cAAc;AAAA,IACpB;AAAA;AAAA,IAGD,iBAAiB;AACf,WAAK,WAAW,CAAC,KAAK;AACtB,WAAK,aAAa,KAAK,WAAW,aAAa;AAAA,IAChD;AAAA;AAAA,IAGD,aAAa;AACX,WAAK,WAAW,CAAC,KAAK;AAAA,IACvB;AAAA;AAAA,IAGD,eAAe;AACb,WAAK,aAAa,CAAC,KAAK;AAAA,IACzB;AAAA;AAAA,IAGD,mBAAmB;AAEjBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AAAA,IACF;AAAA;AAAA,IAGD,cAAc;AACZ,YAAM,QAAQ,CAAC,GAAG,GAAG,EAAE;AACvB,YAAM,eAAe,MAAM,QAAQ,KAAK,YAAY;AACpD,WAAK,eAAe,OAAO,eAAe,KAAK,MAAM,MAAM;AAAA,IAC5D;AAAA;AAAA,IAGD,kBAAkB;AAChB,WAAK,cAAc,KAAK,gBAAgB,UAAU,UAAU;AAAA,IAC7D;AAAA;AAAA,IAGD,eAAe;AACb,WAAK,eAAe;AAAA,IACrB;AAAA;AAAA,IAGD,eAAe;AAEb,YAAM,QAAQ,gBAAgB;AAC9B,YAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,UAAI,UAAU;AACZ,iBAAS,IAAI,kBAAkB,sBAAsB;AAAA,MACvD;AACAA,oBAAAA,MAAI,aAAa;AAAA,IAClB;AAAA;AAAA,IAGD,cAAc,GAAG;AACfA,oBAAAA,yEAAc,SAAS,CAAC;AAAA,IACzB;AAAA,IAED,gBAAgB;AACdA,oBAAAA,MAAY,MAAA,OAAA,oDAAA,QAAQ;AAAA,IACrB;AAAA,IAED,WAAW,GAAG;AACZA,oBAAAA,MAAA,MAAA,OAAA,oDAAY,WAAW,CAAC;AAAA,IAC1B;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9hBA,GAAG,WAAW,eAAe;"}